# リアルタイム共同編集機能の動作確認

## ✅ 設定完了チェックリスト

- [x] Firebaseプロジェクト作成
- [x] Realtime Database有効化
- [x] Webアプリ登録
- [x] `.env.local`ファイル作成
- [x] セキュリティルール設定

## 🧪 動作確認手順

### 1. 開発サーバーの起動

```bash
npm run dev
```

### 2. ワークページにアクセス

ブラウザで `http://localhost:3000/work` にアクセス

**期待される動作:**
- セッションIDが自動生成される
- ヘッダーに「接続中」と表示される（緑色のインジケーター）
- リスクマトリクスが表示される

### 3. パネルの追加テスト

1. 「+ パネルを追加」ボタンをクリック
2. 黄色のパネルが表示される
3. パネルをドラッグして移動できることを確認

### 4. リアルタイム同期の確認

**方法1: 別のブラウザで確認**
1. 別のブラウザ（Chrome、Edge、Firefoxなど）を開く
2. 同じURL（`http://localhost:3000/work/[セッションID]`）にアクセス
3. 一方でパネルを追加すると、もう一方にも即座に表示される
4. パネルを移動すると、リアルタイムで位置が同期される

**方法2: 別のタブで確認**
1. 同じブラウザで別のタブを開く
2. 同じURLにアクセス
3. 同様にリアルタイム同期を確認

### 5. テキスト編集の確認

1. パネル内の「編集」ボタンをクリック
2. テキストを入力
3. 「保存」をクリック
4. 別のブラウザ/タブでテキストが更新されることを確認

### 6. 参加者数の確認

- ヘッダーに「参加者: X人」と表示されることを確認
- 複数のブラウザ/タブで開くと、参加者数が増える

## 🎯 正常に動作している場合

✅ ヘッダーに「接続中」（緑色）と表示される
✅ パネルを追加・編集・削除できる
✅ 別のブラウザ/タブでリアルタイム同期される
✅ 参加者数が正しく表示される
✅ セッションURLをコピーできる

## ⚠️ 問題がある場合

### 接続できない（「切断中」と表示される）

1. ブラウザのコンソール（F12）でエラーを確認
2. `.env.local`ファイルが正しく作成されているか確認
3. 開発サーバーを再起動
4. Firebase Consoleでデータベースが有効になっているか確認

### データが保存されない

1. セキュリティルールが正しく設定されているか確認
2. Firebase Consoleの「Realtime Database」→「Data」タブでデータが表示されるか確認
3. ブラウザのコンソール（F12）でエラーを確認

### リアルタイム同期されない

1. 同じセッションIDのURLにアクセスしているか確認
2. ネットワーク接続を確認
3. ブラウザのコンソール（F12）でエラーを確認

## 📝 使い方（顧客への案内）

1. `/work` にアクセスすると、自動でセッションIDが生成されます
2. ヘッダーの「セッションID」の横にある「コピー」ボタンをクリック
3. 顧客にURLを共有
4. 顧客が同じURLにアクセスすると、リアルタイムで共同編集できます

## 🎉 動作確認が完了したら

リアルタイム共同編集機能が正常に動作していることを確認できたら、顧客にURLを共有して実際のワークセッションを開始できます！

